# Distributed Average Consensus (Message-Based)

## Описание задачи
Цель работы — вычислить среднее арифметическое значений агентов в распределённой системе
без использования общего хранилища или централизованной синхронизации.

Допускается только обмен сообщениями между соседними агентами.
Количество агентов и топология сети формируются случайно.

---

## Используемый подход
Реализован классический алгоритм **average consensus**.

Каждый агент хранит текущее приближение среднего и на каждом шаге:
1. отправляет своё значение всем соседям;
2. принимает значения от соседей;
3. обновляет своё значение как среднее от полученных и собственного.

Алгоритм выполняется синхронными раундами до достижения заданной точности.

---

## Топология сети
- Количество агентов выбирается случайно в заданном диапазоне.
- Граф связный.
- Степень каждой вершины ограничена.
- Связи симметричны (неориентированный граф).

---

## Критерий остановки
Алгоритм завершается, когда максимальная относительная ошибка
между значениями агентов и истинным средним становится меньше заданного порога:

## Задача 2 — Average Consensus с сетевыми помехами

### Описание
Во второй задаче реализуется распределённый алгоритм average consensus
в условиях неблагоприятной сети:
- потери сообщений,
- задержки доставки,
- временные отключения агентов.

Централизованный узел отсутствует, взаимодействие осуществляется
исключительно через обмен сообщениями между соседями.

---

### Модель сети
- **Потери сообщений:** вероятность 10%
- **Задержка доставки:** 1–2 итерации
- **Отказы агентов:** агент может быть offline 1–2 итерации

Все параметры моделируются стохастически.

---

### Алгоритм
Используется модифицированный average consensus с малым шагом обновления:

\[
x_i(k+1) = x_i(k) + \alpha \sum_{j \in N(i)} (x_j(k) - x_i(k))
\]

Малое значение коэффициента α обеспечивает устойчивость алгоритма
при наличии потерь и задержек.

---

### Критерий остановки
Алгоритм завершается, когда относительная ошибка оценки среднего
становится не больше 1% либо достигается максимальное число итераций.

---

### Результат
После завершения моделирования выводятся:
- полученное значение консенсуса,
- истинное среднее,
- абсолютная и относительная ошибка,
- суммарная стоимость вычислений и обмена сообщениями.

---

### Вывод
Алгоритм сохраняет сходимость даже при стохастических сетевых помехах,
однако скорость сходимости и стоимость зависят от интенсивности отказов
и параметров сети.
